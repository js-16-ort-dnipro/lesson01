<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script>

        function calc(){
            

            const singleDeduction = 12950;

            let sum = +incomeSum.value;

            sum -= singleDeduction;

            let backets = [
                
                {
                    rate: 37,
                    limit: 539900
                },
                
                {
                    rate: 35,
                    limit: 215950
                },

                {
                    rate: 32,
                    limit: 170050  
                },

                {
                    rate: 24,
                    limit: 89075
                },

                {
                    rate: 22,
                    limit: 41775 
                },

                {
                    rate: 12,
                    limit: 10275 
                },

                {
                    rate: 10,
                    limit: 0
                }

            ]

            let tax = 0;

            for(let i = 0; i < backets.length; i++){
                if(sum >= backets[i].limit){
                
                    let diff = sum - backets[i].limit;

                    tax += diff * backets[i].rate / 100;

                    console.log(backets[i].rate, diff);

                    sum = backets[i].limit;
                }
            }

            taxSum.innerHTML = `$ ${tax.toFixed(2)}` ;

        }

    </script>
</head>
<body onload='calc()'>
    
    <div class="container mt-5">

        <h1 class='mb-3'>USA Federal Income Tax 2022 for Single Filers | Tester</h1>

        <div class="mb-3 row">
            <label for="staticEmail" class="col-sm-2 col-form-label">Your Income (in USD)</label>
            <div class="col-sm-10">
              <input type="number" oninput='calc()'  class="form-control" id="incomeSum" value="100000" min='0' max='9999999999999999'>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label">Your FIT Sum</label>
            <div class="col-sm-10">
              <h4 id='taxSum'>$ 0.00</h4>
            </div>
          </div>

    </div>

</body>
</html>